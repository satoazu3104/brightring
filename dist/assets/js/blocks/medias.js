!function(){"use strict";var e,l,t,m,r,n,a,o,i={684:function(e,l,t){var m=t(427),r=t(715),n=t(87),a="/home/sato/sato/serve/www/brightring/wp-content/themes/origin/src/js/blocks/component/MediaUpload/ImageSelector.js";l.A=({...e})=>{let l=e.attributes;const t=e.index,o=e.setAttributes;let i=e.count;const u=e.slug,c=void 0===t,[s,_]=(0,n.useState)(c?l[u]:l[t][u]);console.log(c);const N=(e,t,m)=>{if(e&&e.url)if(c)_(e.url),o({[t]:e.url});else{let r=l;console.log(r),r[m][t]=e.url,_(e.url),o({blocksData:r,count:i++})}},p=(e,t)=>{if(c)_(""),o({[e]:""});else{let m=l;m[t][e]="",_(""),o({blocksData:m,count:i++})}};return c?wp.element.createElement(wp.element.Fragment,null,s&&wp.element.createElement("img",{className:"b-media__img",src:s,alt:"Uploaded Image",__self:void 0,__source:{fileName:a,lineNumber:88,columnNumber:22}}),wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:91,columnNumber:9}},wp.element.createElement(r.MediaUpload,{onSelect:e=>N(e,u),allowedTypes:["image"],value:l[u],render:({open:e})=>wp.element.createElement(m.Button,{onClick:e,isPrimary:!0,__self:void 0,__source:{fileName:a,lineNumber:97,columnNumber:15}},"画像を選択"),__self:void 0,__source:{fileName:a,lineNumber:92,columnNumber:11}})),""!==l[u]&&wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:104,columnNumber:11}},wp.element.createElement(m.Button,{onClick:()=>p(u),isLink:!0,isDestructive:!0,className:"removeImage",__self:void 0,__source:{fileName:a,lineNumber:105,columnNumber:13}},"画像を削除"))):wp.element.createElement(wp.element.Fragment,null,s&&wp.element.createElement("img",{src:s,alt:"Uploaded Image",__self:void 0,__source:{fileName:a,lineNumber:56,columnNumber:20}}),wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:59,columnNumber:7}},wp.element.createElement(r.MediaUpload,{onSelect:e=>N(e,u,t),allowedTypes:["image"],value:l[t][u],render:({open:e})=>wp.element.createElement(m.Button,{onClick:e,isPrimary:!0,__self:void 0,__source:{fileName:a,lineNumber:65,columnNumber:13}},"画像を選択"),__self:void 0,__source:{fileName:a,lineNumber:60,columnNumber:9}})),""!==l[u]&&wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:72,columnNumber:9}},wp.element.createElement(m.Button,{onClick:()=>p(u,t),isLink:!0,isDestructive:!0,className:"removeImage",__self:void 0,__source:{fileName:a,lineNumber:73,columnNumber:11}},"画像を削除")))}},760:function(e,l,t){t.d(l,{L:function(){return m.A}});var m=t(684);t(917)},917:function(e,l,t){t(87)},715:function(e){e.exports=window.wp.blockEditor},427:function(e){e.exports=window.wp.components},87:function(e){e.exports=window.wp.element}},u={};function c(e){var l=u[e];if(void 0!==l)return l.exports;var t=u[e]={exports:{}};return i[e](t,t.exports,c),t.exports}c.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(l,{a:l}),l},c.d=function(e,l){for(var t in l)c.o(l,t)&&!c.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})},c.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},e=window.wp.blocks,l=c(427),t=c(715),m=c(760),r=c(87),n=window.wp.apiFetch,a=c.n(n),o="/home/sato/sato/serve/www/brightring/wp-content/themes/origin/src/js/blocks/medias.js",(0,e.registerBlockType)("portart/medias",{title:"画像",icon:"smiley",category:"layout",attributes:{imageUploadUrl:{type:"string",default:""},mobileImageUploadUrl:{type:"string",default:""},imageUrl:{type:"string",default:""},mobileImageUrl:{type:"string",default:""},addClassName:{type:"string",default:""}},edit:({className:e,attributes:n,setAttributes:i})=>{const[u,c]=(0,r.useState)(!1),s=()=>c(!1),_=({onImageSelect:e,imageUrl:t,label:m})=>{const[n,i]=(0,r.useState)([]),[u,c]=(0,r.useState)(!0);(0,r.useEffect)((()=>{a()({path:"/mytheme/v1/theme-images/"}).then((e=>{i(e),c(!1)}))}),[]);const s=n.find((e=>e.url===portartMedia.themeUrl+t))?.url||"";return u?wp.element.createElement("p",{__self:void 0,__source:{fileName:o,lineNumber:56,columnNumber:9}},"Loading..."):wp.element.createElement(l.SelectControl,{label:m??"テーマの画像を選択",value:s,options:[{label:"画像を選択",value:""},...n.map((e=>({label:e.name,value:e.url})))],onChange:l=>e(l),__self:void 0,__source:{fileName:o,lineNumber:58,columnNumber:9}})},{imageUrl:N,mobileImageUrl:p,imageUploadUrl:d,mobileImageUploadUrl:b,addClassName:f}=n;return portartMedia.themeUrl,wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.InspectorControls,{__self:void 0,__source:{fileName:o,lineNumber:89,columnNumber:9}},wp.element.createElement("div",{className:"components-base-control",__self:void 0,__source:{fileName:o,lineNumber:90,columnNumber:11}},wp.element.createElement("p",{__self:void 0,__source:{fileName:o,lineNumber:92,columnNumber:13}},"デスクトップ用画像のアップロード"),wp.element.createElement(m.L,{attributes:n,setAttributes:i,slug:"imageUploadUrl",__self:void 0,__source:{fileName:o,lineNumber:95,columnNumber:13}})),wp.element.createElement("div",{className:"components-base-control",__self:void 0,__source:{fileName:o,lineNumber:98,columnNumber:11}},wp.element.createElement("p",{__self:void 0,__source:{fileName:o,lineNumber:100,columnNumber:13}},"モバイル用画像のアップロード"),wp.element.createElement(m.L,{attributes:n,setAttributes:i,slug:"mobileImageUploadUrl",__self:void 0,__source:{fileName:o,lineNumber:103,columnNumber:13}})),wp.element.createElement(l.TextareaControl,{label:"追加class",value:f,onChange:e=>{i({addClassName:e})},__self:void 0,__source:{fileName:o,lineNumber:106,columnNumber:11}})),u&&wp.element.createElement(l.Modal,{title:"画像を選択",onRequestClose:s,__self:void 0,__source:{fileName:o,lineNumber:118,columnNumber:11}},wp.element.createElement(_,{imageUrl:N,onImageSelect:e=>{const l=e.replace(new RegExp(`^${portartMedia.themeUrl}`),"");i({imageUrl:l})},__self:void 0,__source:{fileName:o,lineNumber:123,columnNumber:13}}),wp.element.createElement(_,{label:"スマホのテーマ画像を選択",imageUrl:p,onImageSelect:e=>{const l=e.replace(new RegExp(`^${portartMedia.themeUrl}`),"");i({mobileImageUrl:l})},__self:void 0,__source:{fileName:o,lineNumber:124,columnNumber:13}}),wp.element.createElement(l.Button,{isPrimary:!0,onClick:s,__self:void 0,__source:{fileName:o,lineNumber:126,columnNumber:13}},"閉じる")),wp.element.createElement("div",{className:"b-media__group",__self:void 0,__source:{fileName:o,lineNumber:132,columnNumber:9}},wp.element.createElement(l.Button,{isPrimary:!0,onClick:()=>c(!0),__self:void 0,__source:{fileName:o,lineNumber:133,columnNumber:11}},"テーマフォルダから画像を選択する"),wp.element.createElement("div",{className:"b-media__group__inner",__self:void 0,__source:{fileName:o,lineNumber:137,columnNumber:11}},(N||d)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{__self:void 0,__source:{fileName:o,lineNumber:140,columnNumber:17}},wp.element.createElement("p",{__self:void 0,__source:{fileName:o,lineNumber:141,columnNumber:19}},"PC画像"),wp.element.createElement("img",{className:"b-media__img",src:d||portartMedia.themeUrl+N,alt:"",__self:void 0,__source:{fileName:o,lineNumber:142,columnNumber:19}}))),(p||b)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{__self:void 0,__source:{fileName:o,lineNumber:148,columnNumber:17}},wp.element.createElement("p",{__self:void 0,__source:{fileName:o,lineNumber:149,columnNumber:19}},"スマホ画像"),wp.element.createElement("img",{className:"b-media__img",src:b||portartMedia.themeUrl+p,alt:"",__self:void 0,__source:{fileName:o,lineNumber:150,columnNumber:19}}))))))},save:({attributes:e})=>{const{imageUrl:l,mobileImageUrl:t,imageUploadUrl:m,mobileImageUploadUrl:r,addClassName:n}=e,a=n+"\n",i=a.replace(/\n/g," "),u=a.replace(/\n/g,"__picture ");return wp.element.createElement(wp.element.Fragment,null,(l||m)&&wp.element.createElement("picture",{className:u,__self:void 0,__source:{fileName:o,lineNumber:168,columnNumber:11}},(t||r)&&wp.element.createElement("source",{className:r?i:i+"block-media","data-src":t,srcSet:r||"",media:"(max-width: 1024px)",__self:void 0,__source:{fileName:o,lineNumber:170,columnNumber:15}}),wp.element.createElement("img",{className:m?i:i+"block-media","data-src":l,src:m||"",alt:"media",__self:void 0,__source:{fileName:o,lineNumber:172,columnNumber:13}})))}})}();
//# sourceMappingURL=medias.js.map